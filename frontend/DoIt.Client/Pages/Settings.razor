@page "/settings"

@attribute [AllowAnonymous]

@* Sign out *@
@using Microsoft.AspNetCore.Components.Authorization
@using Microsoft.AspNetCore.Components.WebAssembly.Authentication

@inject NavigationManager NavManager
@inject SignOutSessionStateManager SignOutManager


<h3>Settings</h3>

@*<AuthorizeView>
        <Authorized>
            Hello, @context.User.Identity.Name!
            <button class="nav-link">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="24px" height="24px"><path d="M0 0h24v24H0z" fill="none" /><path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z" /></svg>
            </button>
        </Authorized>
    </AuthorizeView>*@

<button @onclick="SignOut">Log out</button>

@code {
    private async Task SignOut(MouseEventArgs args)
    {
        await SignOutManager.SetSignOutState();
        NavManager.NavigateTo("/authentication/logout");
    }
}
